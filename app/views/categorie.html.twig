{% extends "layout/layout.html.twig" %}

{% block content %}
	<article class="rounded bg-stone-200 mx-auto w-fit py-5 px-10 my-5">
		<div class="flex justify-between items-center mb-4">
			<a href="/categorie/new" class="add-btn">
				+ Ajouter une catégorie
			</a>
			<form method="GET" action="" class="flex items-center gap-2">
				<label for="sort" class="text-sm text-stone-700">
					Trier par :
				</label>
				<select name="sort" id="sort" class="rounded border-stone-300 text-sm focus:ring-emerald-500 focus:border-emerald-500" onchange="this.form.submit()">
					<option value="id_asc">ID ↑</option>
					<option value="id_desc">ID ↓</option>
					<option value="name_asc">Nom A–Z</option>
					<option value="name_desc">Nom Z–A</option>
				</select>
			</form>
		</div>

		<table class="table-auto border-collapse">
			<thead>
				<tr class="border-b border-stone-400">
					<th class="px-6 py-3 text-left">ID</th>
					<th class="px-6 py-3 text-left">Nom</th>
					<th class="px-6 py-3 text-center">Modifier</th>
					<th class="px-6 py-3 text-center">Supprimer</th>
				</tr>
			</thead>

			<tbody>
				{% for categorie in categories %}
					<tr class="border-b border-stone-300">
						<td class="px-6 py-3">{{ categorie.id }}</td>
						<td class="px-6 py-3">{{ categorie.nom }}</td>

						<td class="px-6 py-3 text-center">
							<a href="/categorie/{{ categorie.id }}/edit" class="edit-btn">
								Modifier
							</a>
						</td>

						<td class="px-6 py-3 text-center">
							<form method="POST" action="/categorie/{{ categorie.id }}/delete">
								<button type="submit" class="delete-btn">
									Supprimer
								</button>
							</form>
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="4" class="px-6 py-3 text-center">
							Aucune catégorie trouvée
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</article>
	<!-- Modal Ajouter -->
	<div id="modal-add" class="hidden fixed inset-0 bg-black/50 items-center justify-center">
		<form action="" method="POST" class="bg-white rounded p-6 w-96">
			<input type="text" class="border-2 border-gray-300 px-3 py-1 my-0.5" placeholder="Nom catégorie">
			<div class="flex justify-end gap-2 my-2">
				<button id="closeModal" class="cancel-btn">
					Annuler
				</button>
				<button class="add-btn">
					Ajouter
				</button>
			</div>
		</form>
	</div>
	<!-- Modal Supprimer -->
	<div id="modal-add" class="hidden fixed inset-0 bg-black/50 items-center justify-center">
		<form action="" method="POST" class="bg-white rounded p-6 w-96">
			<p class="px-3 py-1 my-0.5">Voulez-vous vraiment supprimer cette catégorie ?</p>
			<div class="flex justify-end gap-2 my-2">
				<button id="closeModal" class="cancel-btn">
					Annuler
				</button>
				<button class="delete-btn">
					Supprimer
				</button>
			</div>
		</form>
	</div>
	<!-- Modal Modifier -->
	<div id="modal-add" class="hidden fixed inset-0 bg-black/50 items-center justify-center">
		<form action="" method="POST" class="bg-white rounded p-6 w-96">
			<input type="text" class="border-2 border-gray-300 px-3 py-1 my-0.5" placeholder="Nouveau nom">
			<div class="flex justify-end gap-2 my-2">
				<button id="closeModal" class="cancel-btn">
					Annuler
				</button>
				<button class="add-btn">
					Confirmer
				</button>
			</div>
		</form>
	</div>
{% endblock %}
